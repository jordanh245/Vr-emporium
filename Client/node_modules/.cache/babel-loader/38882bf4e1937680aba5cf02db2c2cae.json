{"ast":null,"code":"import _defineProperty from\"/Users/jordanharris/Desktop/Vr-emporium/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/jordanharris/Desktop/Vr-emporium/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/jordanharris/Desktop/Vr-emporium/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jordanharris/Desktop/Vr-emporium/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jordanharris/Desktop/Vr-emporium/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{connect}from\"react-redux\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),loginInfo=_useState2[0],setLoginInfo=_useState2[1];var history=useHistory();//   CHANGE HANDLE TO THIS\n// const handleChange = (e) => {\n// \tsetLoginInfo ({\n// \t\t...loginInfo,\n// \t\t[e.target.name]: e.target.value\n// \t})\n// }\nvar handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var login;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch('http://localhost:3000/login',{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(loginInfo)}).then(function(response){return response.json();}).then(function(result){// console.log(result)\nif(result.success===true){var token=result.token;localStorage.setItem(\"jsonwebtoken\",token);props.onLoggedIn();props.history.push(\"/account\");}});case 3:login=_context.sent;case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"email\",onChange:function onChange(e){return setLoginInfo(_objectSpread(_objectSpread({},loginInfo),{},_defineProperty({},e.target.name,e.target.value)));},name:\"email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"password\",onChange:function onChange(e){return setLoginInfo(_objectSpread(_objectSpread({},loginInfo),{},_defineProperty({},e.target.name,e.target.value)));},name:\"password\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleLogin(e);},children:\"SUBMIT\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"New here? Click here to register!\"})]});}var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onLoggedIn:function onLoggedIn(){return dispatch({type:\"ON_LOGGED_IN\"});}};};export default connect(null,mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/jordanharris/Desktop/Vr-emporium/Client/src/components/Login.js"],"names":["React","useState","connect","useHistory","Login","props","email","password","loginInfo","setLoginInfo","history","handleLogin","e","preventDefault","fetch","method","mode","headers","body","JSON","stringify","then","response","json","result","success","token","localStorage","setItem","onLoggedIn","push","login","target","name","value","mapDispatchToProps","dispatch","type"],"mappings":"uzBAEA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAAQC,OAAR,KAAuB,aAAvB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,C,wFAGC,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,CAEtB,cAAkCJ,QAAQ,CAAC,CAC1CK,KAAK,CAAC,EADoC,CAE1CC,QAAQ,CAAC,EAFiC,CAAD,CAA1C,wCAAOC,SAAP,eAAkBC,YAAlB,eAMA,GAAMC,CAAAA,OAAO,CAAGP,UAAU,EAA1B,CACD;AACC;AACA;AACA;AACA;AACA;AACA;AAGA,GAAMQ,CAAAA,WAAW,0FAAG,iBAAOC,CAAP,4HACnBA,CAAC,CAACC,cAAF,GADmB,sBAECC,CAAAA,KAAK,CAAC,6BAAD,CAAgC,CACxDC,MAAM,CAAE,MADgD,CAExDC,IAAI,CAAE,MAFkD,CAGxDC,OAAO,CAAE,CACR,eAAe,kBADP,CAH+C,CAOxDC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeZ,SAAf,CAPkD,CAAhC,CAAL,CAQhBa,IARgB,CAQX,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EARG,EASnBF,IATmB,CASd,SAACG,MAAD,CAAY,CACjB;AACA,GAAIA,MAAM,CAACC,OAAP,GAAmB,IAAvB,CAA6B,CAC5B,GAAMC,CAAAA,KAAK,CAAGF,MAAM,CAACE,KAArB,CACAC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAqCF,KAArC,EACArB,KAAK,CAACwB,UAAN,GACAxB,KAAK,CAACK,OAAN,CAAcoB,IAAd,CAAmB,UAAnB,EACA,CACD,CAjBmB,CAFD,QAEbC,KAFa,qEAAH,kBAAXpB,CAAAA,WAAW,4CAAjB,CA0BA,mBACC,oCAEC,cAAO,IAAI,CAAC,MAAZ,CAAoB,WAAW,CAAC,OAAhC,CACS,QAAQ,CAAE,kBAACC,CAAD,QAAOH,CAAAA,YAAY,gCAAKD,SAAL,wBAAiBI,CAAC,CAACoB,MAAF,CAASC,IAA1B,CAAgCrB,CAAC,CAACoB,MAAF,CAASE,KAAzC,GAAnB,EADnB,CACwF,IAAI,CAAC,OAD7F,EAFD,cAIC,cAAO,IAAI,CAAC,MAAZ,CAAoB,WAAW,CAAC,UAAhC,CACS,QAAQ,CAAE,kBAACtB,CAAD,QAAOH,CAAAA,YAAY,gCAAKD,SAAL,wBAAiBI,CAAC,CAACoB,MAAF,CAASC,IAA1B,CAAgCrB,CAAC,CAACoB,MAAF,CAASE,KAAzC,GAAnB,EADnB,CACwF,IAAI,CAAC,UAD7F,EAJD,cAMC,eAAQ,OAAO,CAAE,iBAACtB,CAAD,QAAKD,CAAAA,WAAW,CAACC,CAAD,CAAhB,EAAjB,oBAND,cAOC,UAAG,IAAI,CAAC,WAAR,+CAPD,GADD,CAWC,CACF,GAAMuB,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,CAAc,CACxC,MAAO,CACNP,UAAU,CAAE,4BAAMO,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAE,cAAP,CAAD,CAAd,EADN,CAAP,CAGA,CAJD,CAMA,cAAenC,CAAAA,OAAO,CAAC,IAAD,CAAOiC,kBAAP,CAAP,CAAkC/B,KAAlC,CAAf","sourcesContent":["\n\nimport React, { useState } from 'react'\nimport {connect } from \"react-redux\"\nimport {useHistory} from \"react-router-dom\"\n\n\n function Login(props) {\n\t\n\tconst [loginInfo, setLoginInfo] = useState({\n\t\temail:\"\",\n\t\tpassword:\"\",\n\n\t})\n\n\tconst history = useHistory()\n//   CHANGE HANDLE TO THIS\n\t// const handleChange = (e) => {\n\t// \tsetLoginInfo ({\n\t// \t\t...loginInfo,\n\t// \t\t[e.target.name]: e.target.value\n\t// \t})\n\t// }\n\n\n\tconst handleLogin = async (e) => {\n\t\te.preventDefault();\n\t\tconst login = await fetch('http://localhost:3000/login', {\n\t\t\tmethod: \"POST\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\":\"application/json\",\n\t\t\t\t\n\t\t\t},\n\t\t\tbody: JSON.stringify(loginInfo)\n\t\t}) .then(response => response.json())\n\t\t.then((result) => {\n\t\t\t// console.log(result)\n\t\t\tif (result.success === true) {\n\t\t\t\tconst token = result.token\n\t\t\t\tlocalStorage.setItem(\"jsonwebtoken\", token);\n\t\t\t\tprops.onLoggedIn();\n\t\t\t\tprops.history.push(\"/account\")\n\t\t\t}\n\t\t})\n\t\t// window.location.reload(false);\n\t};\n\n\n\n\n\treturn (\n\t\t<div>\n\t\t\t\n\t\t\t<input type=\"text\"  placeholder=\"email\" \n            onChange={(e) => setLoginInfo({...loginInfo, [e.target.name]:e.target.value})} name=\"email\"/>\n\t\t\t<input type=\"text\"  placeholder=\"password\" \n            onChange={(e) => setLoginInfo({...loginInfo, [e.target.name]:e.target.value})} name=\"password\"/>\n\t\t\t<button onClick={(e)=>handleLogin(e)}>SUBMIT</button>\n\t\t\t<a href=\"/register\">New here? Click here to register!</a>\n\t\t</div>\n\t)\n\t}\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonLoggedIn: () => dispatch({type: \"ON_LOGGED_IN\"})\n\t};\n};\n\nexport default connect(null, mapDispatchToProps)(Login);\n\t"]},"metadata":{},"sourceType":"module"}